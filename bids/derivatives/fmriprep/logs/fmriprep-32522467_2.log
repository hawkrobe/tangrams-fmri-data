Purging modules
Slurm job ID:  32522467
Sat Aug 12 12:37:14 EDT 2023
Running fMRIPrep on sub-002
AnacondaPy 5.3.1 is deprecated and should not be used for new work.

	module anacondapy/5.3.1 loaded.
	5.3.1 contains an old version of the conda command.
	Use 'source activate' not 'conda activate' or you will get an error.
	Newer modules with the YYYY.MM version format do not have this problem.
	This version (5.3.1) should continue to be used with environments
	created with it. Otherwise, you may get GLIBCXX_version errors.

You are using fMRIPrep-23.1.3, and a newer version of fMRIPrep is available: 23.1.4.
Please check out our documentation about how and when to upgrade:
https://fmriprep.readthedocs.io/en/latest/faq.html#upgrading
bids-validator@1.11.0
(node:22977) Warning: Closing directory handle on garbage collection
(Use `node --trace-warnings ...` to show where the warning was created)
	[33m1: [WARN] The recommended file /README is very small. Please consider expanding it with additional information about the dataset. (code: 213 - README_FILE_SMALL)[39m
		./README

[36m	Please visit https://neurostars.org/search?q=README_FILE_SMALL for existing conversations about this issue.[39m

        [34m[4mSummary:[24m[39m                   [34m[4mAvailable Tasks:[24m[39m                             [34m[4mAvailable Modalities:[24m[39m 
        1619 Files, 39.02GB        PreExposure                                  MRI                   
        42 - Subjects              PostTest                                                           
        1 - Session                PostExposure                                                       
                                   Repeated                                                           
                                   PreTest                                                            
                                   TODO: full task name for PostExposure                              
                                   TODO: full task name for PostTest                                  
                                   TODO: full task name for PreExposure                               
                                   TODO: full task name for PreTest                                   
                                   TODO: full task name for Repeated                                  


[36m	If you have any questions, please post on https://neurostars.org/tags/bids.[39m
230812-16:38:41,746 nipype.workflow IMPORTANT:
	 Running fMRIPrep version 23.1.3

         License NOTICE ##################################################
         fMRIPrep 23.1.3
         Copyright 2023 The NiPreps Developers.
         
         This product includes software developed by
         the NiPreps Community (https://nipreps.org/).
         
         Portions of this software were developed at the Department of
         Psychology at Stanford University, Stanford, CA, US.
         
         This software is also distributed as a Docker container image.
         The bootstrapping file for the image ("Dockerfile") is licensed
         under the MIT License.
         
         This software may be distributed through an add-on package called
         "Docker Wrapper" that is under the BSD 3-clause License.
         #################################################################
230812-16:38:41,748 nipype.workflow WARNING:
	 Previous output generated by version 0+unknown found.
230812-16:38:54,853 nipype.workflow IMPORTANT:
	 Building fMRIPrep's workflow:
           * BIDS dataset path: /project/data/bids.
           * Participant list: ['p002'].
           * Run identifier: 20230812-163724_20ea8c38-fb76-46b4-9a99-576771f19491.
           * Output spaces: T1w fsaverage:den-41k MNI152NLin2009cAsym:res-native.
           * Pre-run FreeSurfer's SUBJECTS_DIR: /project/data/bids/derivatives/sourcedata/freesurfer.
230812-16:38:58,429 nipype.workflow INFO:
	 B0 field inhomogeneity map will be estimated with  the following 1 estimators: [<EstimatorType.PEPOLAR: 2>].
230812-16:38:58,975 nipype.workflow INFO:
	 No single-band-reference found for sub-p002_task-PostExposure_run-01_bold.nii.gz.
230812-16:38:58,985 nipype.workflow INFO:
	 Found usable B0-map (fieldmap) estimator(s) <auto_00000> to correct </project/data/bids/sub-p002/func/sub-p002_task-PostExposure_run-01_bold.nii.gz> for susceptibility-derived distortions.
230812-16:38:59,173 nipype.workflow IMPORTANT:
	 BOLD series will be slice-timing corrected to an offset of 0.708s.
230812-16:39:02,91 nipype.workflow INFO:
	 No single-band-reference found for sub-p002_task-PostTest_run-01_bold.nii.gz.
230812-16:39:02,104 nipype.workflow INFO:
	 Found usable B0-map (fieldmap) estimator(s) <auto_00000> to correct </project/data/bids/sub-p002/func/sub-p002_task-PostTest_run-01_bold.nii.gz> for susceptibility-derived distortions.
230812-16:39:02,661 nipype.workflow IMPORTANT:
	 BOLD series will be slice-timing corrected to an offset of 0.708s.
230812-16:39:03,284 nipype.workflow INFO:
	 No single-band-reference found for sub-p002_task-PreExposure_run-01_bold.nii.gz.
230812-16:39:03,300 nipype.workflow INFO:
	 Found usable B0-map (fieldmap) estimator(s) <auto_00000> to correct </project/data/bids/sub-p002/func/sub-p002_task-PreExposure_run-01_bold.nii.gz> for susceptibility-derived distortions.
230812-16:39:03,528 nipype.workflow IMPORTANT:
	 BOLD series will be slice-timing corrected to an offset of 0.708s.
230812-16:39:04,155 nipype.workflow INFO:
	 No single-band-reference found for sub-p002_task-PreTest_run-01_bold.nii.gz.
230812-16:39:04,167 nipype.workflow INFO:
	 Found usable B0-map (fieldmap) estimator(s) <auto_00000> to correct </project/data/bids/sub-p002/func/sub-p002_task-PreTest_run-01_bold.nii.gz> for susceptibility-derived distortions.
230812-16:39:04,345 nipype.workflow IMPORTANT:
	 BOLD series will be slice-timing corrected to an offset of 0.708s.
230812-16:39:04,960 nipype.workflow INFO:
	 No single-band-reference found for sub-p002_task-Repeated_run-01_bold.nii.gz.
230812-16:39:04,972 nipype.workflow INFO:
	 Found usable B0-map (fieldmap) estimator(s) <auto_00000> to correct </project/data/bids/sub-p002/func/sub-p002_task-Repeated_run-01_bold.nii.gz> for susceptibility-derived distortions.
230812-16:39:05,143 nipype.workflow IMPORTANT:
	 BOLD series will be slice-timing corrected to an offset of 0.708s.
230812-16:39:05,848 nipype.workflow INFO:
	 No single-band-reference found for sub-p002_task-Repeated_run-02_bold.nii.gz.
230812-16:39:05,860 nipype.workflow INFO:
	 Found usable B0-map (fieldmap) estimator(s) <auto_00000> to correct </project/data/bids/sub-p002/func/sub-p002_task-Repeated_run-02_bold.nii.gz> for susceptibility-derived distortions.
230812-16:39:06,48 nipype.workflow IMPORTANT:
	 BOLD series will be slice-timing corrected to an offset of 0.708s.
230812-16:39:06,599 nipype.workflow INFO:
	 No single-band-reference found for sub-p002_task-Repeated_run-03_bold.nii.gz.
230812-16:39:06,610 nipype.workflow INFO:
	 Found usable B0-map (fieldmap) estimator(s) <auto_00000> to correct </project/data/bids/sub-p002/func/sub-p002_task-Repeated_run-03_bold.nii.gz> for susceptibility-derived distortions.
230812-16:39:06,790 nipype.workflow IMPORTANT:
	 BOLD series will be slice-timing corrected to an offset of 0.708s.
230812-16:39:07,361 nipype.workflow INFO:
	 No single-band-reference found for sub-p002_task-Repeated_run-04_bold.nii.gz.
230812-16:39:07,376 nipype.workflow INFO:
	 Found usable B0-map (fieldmap) estimator(s) <auto_00000> to correct </project/data/bids/sub-p002/func/sub-p002_task-Repeated_run-04_bold.nii.gz> for susceptibility-derived distortions.
230812-16:39:07,561 nipype.workflow IMPORTANT:
	 BOLD series will be slice-timing corrected to an offset of 0.708s.
230812-16:39:08,145 nipype.workflow INFO:
	 No single-band-reference found for sub-p002_task-Repeated_run-05_bold.nii.gz.
230812-16:39:08,156 nipype.workflow INFO:
	 Found usable B0-map (fieldmap) estimator(s) <auto_00000> to correct </project/data/bids/sub-p002/func/sub-p002_task-Repeated_run-05_bold.nii.gz> for susceptibility-derived distortions.
230812-16:39:08,332 nipype.workflow IMPORTANT:
	 BOLD series will be slice-timing corrected to an offset of 0.708s.
230812-16:39:08,854 nipype.workflow INFO:
	 No single-band-reference found for sub-p002_task-Repeated_run-06_bold.nii.gz.
230812-16:39:08,865 nipype.workflow INFO:
	 Found usable B0-map (fieldmap) estimator(s) <auto_00000> to correct </project/data/bids/sub-p002/func/sub-p002_task-Repeated_run-06_bold.nii.gz> for susceptibility-derived distortions.
230812-16:39:09,43 nipype.workflow IMPORTANT:
	 BOLD series will be slice-timing corrected to an offset of 0.709s.
230812-16:39:10,637 nipype.workflow INFO:
	 Setting-up fieldmap "auto_00000" (EstimatorType.PEPOLAR) with <sub-p002_dir-AP_epi.nii.gz, sub-p002_dir-PA_epi.nii.gz>
230812-16:39:49,229 nipype.workflow INFO:
	 fMRIPrep workflow graph with 2678 nodes built successfully.
230812-16:40:34,541 nipype.workflow IMPORTANT:
	 fMRIPrep started!
230812-16:41:19,457 nipype.workflow WARNING:
	 Error while checking node hash, forcing re-run. Although this error may not prevent the workflow from running, it could indicate a major problem. Please report a new issue at https://github.com/nipy/nipype/issues adding the following information:

	Node: fmriprep_23_1_wf.single_subject_p002_wf.summary
	Interface: fmriprep.interfaces.reports.SubjectSummary
	Traceback:
Traceback (most recent call last):

  File "/opt/conda/envs/fmriprep/lib/python3.10/site-packages/nipype/pipeline/plugins/base.py", line 376, in _local_hash_check
    cached, updated = self.procs[jobid].is_cached()

  File "/opt/conda/envs/fmriprep/lib/python3.10/site-packages/nipype/pipeline/engine/nodes.py", line 342, in is_cached
    hashed_inputs, hashvalue = self._get_hashval()

  File "/opt/conda/envs/fmriprep/lib/python3.10/site-packages/nipype/pipeline/engine/nodes.py", line 548, in _get_hashval
    self._get_inputs()

  File "/opt/conda/envs/fmriprep/lib/python3.10/site-packages/nipype/pipeline/engine/nodes.py", line 619, in _get_inputs
    self.set_input(key, deepcopy(output_value))

  File "/opt/conda/envs/fmriprep/lib/python3.10/site-packages/nipype/pipeline/engine/nodes.py", line 312, in set_input
    setattr(self.inputs, parameter, deepcopy(val))

  File "/opt/conda/envs/fmriprep/lib/python3.10/site-packages/nipype/interfaces/base/traits_extension.py", line 424, in validate
    value = super(MultiObject, self).validate(objekt, name, newvalue)

  File "/opt/conda/envs/fmriprep/lib/python3.10/site-packages/traits/trait_types.py", line 2699, in validate
    return TraitListObject(self, object, name, value)

  File "/opt/conda/envs/fmriprep/lib/python3.10/site-packages/traits/trait_list_object.py", line 582, in __init__
    super().__init__(

  File "/opt/conda/envs/fmriprep/lib/python3.10/site-packages/traits/trait_list_object.py", line 213, in __init__
    super().__init__(self.item_validator(item) for item in iterable)

  File "/opt/conda/envs/fmriprep/lib/python3.10/site-packages/traits/trait_list_object.py", line 213, in <genexpr>
    super().__init__(self.item_validator(item) for item in iterable)

  File "/opt/conda/envs/fmriprep/lib/python3.10/site-packages/traits/trait_list_object.py", line 865, in _item_validator
    return trait_validator(object, self.name, value)

  File "/opt/conda/envs/fmriprep/lib/python3.10/site-packages/traits/trait_handlers.py", line 873, in validate
    return self.slow_validate(object, name, value)

  File "/opt/conda/envs/fmriprep/lib/python3.10/site-packages/traits/trait_handlers.py", line 881, in slow_validate
    self.error(object, name, value)

  File "/opt/conda/envs/fmriprep/lib/python3.10/site-packages/traits/base_trait_handler.py", line 74, in error
    raise TraitError(

traits.trait_errors.TraitError: Each element of the 'bold' trait of a SubjectSummaryInputSpec instance must be a pathlike object or string representing an existing file or a list of items which are a pathlike object or string representing an existing file, but a value of '/project/data/bids/sub-p002/func/sub-p002_task-Posttest_run-01_bold.nii.gz' <class 'str'> was specified.

Error setting node input:
Node: summary
input: bold
results_file: /scratch/fmriprep_23_1_wf/single_subject_p002_wf/bidssrc/result_bidssrc.pklz
value: ['/project/data/bids/sub-p002/func/sub-p002_task-PostExposure_run-01_bold.nii.gz', '/project/data/bids/sub-p002/func/sub-p002_task-Posttest_run-01_bold.nii.gz', '/project/data/bids/sub-p002/func/sub-p002_task-PreExposure_run-01_bold.nii.gz', '/project/data/bids/sub-p002/func/sub-p002_task-Pretest_run-01_bold.nii.gz', '/project/data/bids/sub-p002/func/sub-p002_task-Repeated_run-01_bold.nii.gz', '/project/data/bids/sub-p002/func/sub-p002_task-Repeated_run-02_bold.nii.gz', '/project/data/bids/sub-p002/func/sub-p002_task-Repeated_run-03_bold.nii.gz', '/project/data/bids/sub-p002/func/sub-p002_task-Repeated_run-04_bold.nii.gz', '/project/data/bids/sub-p002/func/sub-p002_task-Repeated_run-05_bold.nii.gz', '/project/data/bids/sub-p002/func/sub-p002_task-Repeated_run-06_bold.nii.gz']

230812-16:41:19,465 nipype.workflow ERROR:
	 Node summary failed to run on host redshirt-n14.
230812-16:41:19,476 nipype.workflow ERROR:
	 Saving crash info to /project/data/bids/derivatives/sub-p002/log/20230812-163724_20ea8c38-fb76-46b4-9a99-576771f19491/crash-20230812-164119-robertdh-summary-d421c42f-0769-4149-959f-4e15b7bce3b0.txt
Traceback (most recent call last):
  File "/opt/conda/envs/fmriprep/lib/python3.10/site-packages/nipype/pipeline/plugins/multiproc.py", line 344, in _send_procs_to_workers
    self.procs[jobid].run(updatehash=updatehash)
  File "/opt/conda/envs/fmriprep/lib/python3.10/site-packages/nipype/pipeline/engine/nodes.py", line 454, in run
    cached, updated = self.is_cached()
  File "/opt/conda/envs/fmriprep/lib/python3.10/site-packages/nipype/pipeline/engine/nodes.py", line 342, in is_cached
    hashed_inputs, hashvalue = self._get_hashval()
  File "/opt/conda/envs/fmriprep/lib/python3.10/site-packages/nipype/pipeline/engine/nodes.py", line 548, in _get_hashval
    self._get_inputs()
  File "/opt/conda/envs/fmriprep/lib/python3.10/site-packages/nipype/pipeline/engine/nodes.py", line 619, in _get_inputs
    self.set_input(key, deepcopy(output_value))
  File "/opt/conda/envs/fmriprep/lib/python3.10/site-packages/nipype/pipeline/engine/nodes.py", line 312, in set_input
    setattr(self.inputs, parameter, deepcopy(val))
  File "/opt/conda/envs/fmriprep/lib/python3.10/site-packages/nipype/interfaces/base/traits_extension.py", line 424, in validate
    value = super(MultiObject, self).validate(objekt, name, newvalue)
  File "/opt/conda/envs/fmriprep/lib/python3.10/site-packages/traits/trait_types.py", line 2699, in validate
    return TraitListObject(self, object, name, value)
  File "/opt/conda/envs/fmriprep/lib/python3.10/site-packages/traits/trait_list_object.py", line 582, in __init__
    super().__init__(
  File "/opt/conda/envs/fmriprep/lib/python3.10/site-packages/traits/trait_list_object.py", line 213, in __init__
    super().__init__(self.item_validator(item) for item in iterable)
  File "/opt/conda/envs/fmriprep/lib/python3.10/site-packages/traits/trait_list_object.py", line 213, in <genexpr>
    super().__init__(self.item_validator(item) for item in iterable)
  File "/opt/conda/envs/fmriprep/lib/python3.10/site-packages/traits/trait_list_object.py", line 865, in _item_validator
    return trait_validator(object, self.name, value)
  File "/opt/conda/envs/fmriprep/lib/python3.10/site-packages/traits/trait_handlers.py", line 873, in validate
    return self.slow_validate(object, name, value)
  File "/opt/conda/envs/fmriprep/lib/python3.10/site-packages/traits/trait_handlers.py", line 881, in slow_validate
    self.error(object, name, value)
  File "/opt/conda/envs/fmriprep/lib/python3.10/site-packages/traits/base_trait_handler.py", line 74, in error
    raise TraitError(
traits.trait_errors.TraitError: Each element of the 'bold' trait of a SubjectSummaryInputSpec instance must be a pathlike object or string representing an existing file or a list of items which are a pathlike object or string representing an existing file, but a value of '/project/data/bids/sub-p002/func/sub-p002_task-Posttest_run-01_bold.nii.gz' <class 'str'> was specified.

Error setting node input:
Node: summary
input: bold
results_file: /scratch/fmriprep_23_1_wf/single_subject_p002_wf/bidssrc/result_bidssrc.pklz
value: ['/project/data/bids/sub-p002/func/sub-p002_task-PostExposure_run-01_bold.nii.gz', '/project/data/bids/sub-p002/func/sub-p002_task-Posttest_run-01_bold.nii.gz', '/project/data/bids/sub-p002/func/sub-p002_task-PreExposure_run-01_bold.nii.gz', '/project/data/bids/sub-p002/func/sub-p002_task-Pretest_run-01_bold.nii.gz', '/project/data/bids/sub-p002/func/sub-p002_task-Repeated_run-01_bold.nii.gz', '/project/data/bids/sub-p002/func/sub-p002_task-Repeated_run-02_bold.nii.gz', '/project/data/bids/sub-p002/func/sub-p002_task-Repeated_run-03_bold.nii.gz', '/project/data/bids/sub-p002/func/sub-p002_task-Repeated_run-04_bold.nii.gz', '/project/data/bids/sub-p002/func/sub-p002_task-Repeated_run-05_bold.nii.gz', '/project/data/bids/sub-p002/func/sub-p002_task-Repeated_run-06_bold.nii.gz']

230812-16:41:23,770 nipype.workflow INFO:
	 [Node] Setting-up "fmriprep_23_1_wf.single_subject_p002_wf.anat_preproc_wf.fs_isrunning" in "/scratch/fmriprep_23_1_wf/single_subject_p002_wf/anat_preproc_wf/fs_isrunning".
230812-16:41:23,821 nipype.workflow INFO:
	 [Node] Executing "fs_isrunning" <nipype.interfaces.utility.wrappers.Function>
230812-16:41:23,828 nipype.workflow INFO:
	 [Node] Finished "fs_isrunning", elapsed time 0.002523s.
